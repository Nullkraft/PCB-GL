Bottom: 4f5c1b4fed65c22d9e9d85b8e0244b9f87c749b8
Top:    49cedef498aa6538722189707b5f6328bf2a3529
Author: Peter Clifton <peter@clifton-electronics.co.uk>
Date:   2016-02-06 15:22:48 +0000

Rename VNODE data elements back


---

diff --git a/src/polyarea.h b/src/polyarea.h
index 9fa6d44..c606077 100644
--- a/src/polyarea.h
+++ b/src/polyarea.h
@@ -80,7 +80,7 @@ struct CVCList
 };
 struct VNODE
 {
-    VNODE *_next, *_prev, *shared;
+    VNODE *next, *prev, *shared;
     struct {
       unsigned int status:3;
       unsigned int mark:1;
diff --git a/src/polygon1.c b/src/polygon1.c
index 6b8e13c..ea2290c 100644
--- a/src/polygon1.c
+++ b/src/polygon1.c
@@ -82,13 +82,13 @@ int vect_inters2 (Vector A, Vector B, Vector C, Vector D, Vector S1,
  * traverses edges and vertices..
  */
 #define VERTEX_FORWARD_EDGE(v) ((v))
-#define VERTEX_BACKWARD_EDGE(v) ((v)->_prev)
-#define EDGE_FORWARD_VERTEX(e) ((e)->_next)
+#define VERTEX_BACKWARD_EDGE(v) ((v)->prev)
+#define EDGE_FORWARD_VERTEX(e) ((e)->next)
 #define EDGE_BACKWARD_VERTEX(e) ((e))
-#define NEXT_VERTEX(v) ((v)->_next)
-#define PREV_VERTEX(v) ((v)->_prev)
-#define NEXT_EDGE(e) ((e)->_next)
-#define PREV_EDGE(e) ((e)->_prev)
+#define NEXT_VERTEX(v) ((v)->next)
+#define PREV_VERTEX(v) ((v)->prev)
+#define NEXT_EDGE(e) ((e)->next)
+#define PREV_EDGE(e) ((e)->prev)
 
 #define ISECTED 3
 #define UNKNWN  0
@@ -2516,7 +2516,7 @@ cntrbox_pointin (PLINE * c, Vector p)
 static inline int
 node_neighbours (VNODE * a, VNODE * b)
 {
-  return (a == b) || (a->_next == b) || (b->_next == a) || (a->_next == b->_next);
+  return (a == b) || (a->next == b) || (b->next == a) || (a->next == b->next);
 }
 
 VNODE *
@@ -3218,23 +3218,23 @@ poly_ChkContour (PLINE * a)
       do
 	{
 	  if (!node_neighbours (a1, a2) &&
-	      (icnt = vect_inters2 (a1->point, a1->_next->point,
-				    a2->point, a2->_next->point, i1, i2)) > 0)
+	      (icnt = vect_inters2 (a1->point, a1->next->point,
+				    a2->point, a2->next->point, i1, i2)) > 0)
 	    {
 	      if (icnt > 1)
 		return TRUE;
 
 	      if (vect_dist2 (i1, a1->point) < EPSILON)
 		hit1 = a1;
-	      else if (vect_dist2 (i1, a1->_next->point) < EPSILON)
-		hit1 = a1->_next;
+	      else if (vect_dist2 (i1, a1->next->point) < EPSILON)
+		hit1 = a1->next;
 	      else
 		hit1 = NULL;
 
 	      if (vect_dist2 (i1, a2->point) < EPSILON)
 		hit2 = a2;
-	      else if (vect_dist2 (i1, a2->_next->point) < EPSILON)
-		hit2 = a2->_next;
+	      else if (vect_dist2 (i1, a2->next->point) < EPSILON)
+		hit2 = a2->next;
 	      else
 		hit2 = NULL;
 
@@ -3250,7 +3250,7 @@ poly_ChkContour (PLINE * a)
 		/* An end-point of the second line touched somewhere along the
 		   length of the first line. Check where the second line leads. */
 		  if (inside_sector (hit2, a1->point) !=
-		      inside_sector (hit2, a1->_next->point))
+		      inside_sector (hit2, a1->next->point))
 		    return TRUE;
 		}
 	      else if (hit2 == NULL)
@@ -3258,21 +3258,21 @@ poly_ChkContour (PLINE * a)
 		/* An end-point of the first line touched somewhere along the
 		   length of the second line. Check where the first line leads. */
 		  if (inside_sector (hit1, a2->point) !=
-		      inside_sector (hit1, a2->_next->point))
+		      inside_sector (hit1, a2->next->point))
 		    return TRUE;
 		}
 	      else
 		{
 		/* Both lines intersect at an end-point. Check where they lead. */
-		  if (inside_sector (hit1, hit2->_prev->point) !=
-		      inside_sector (hit1, hit2->_next->point))
+		  if (inside_sector (hit1, hit2->prev->point) !=
+		      inside_sector (hit1, hit2->next->point))
 		    return TRUE;
 		}
 	    }
 	}
-      while ((a2 = a2->_next) != &a->head);
+      while ((a2 = a2->next) != &a->head);
     }
-  while ((a1 = a1->_next) != &a->head);
+  while ((a1 = a1->next) != &a->head);
   return FALSE;
 }
